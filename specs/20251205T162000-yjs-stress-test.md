# YJS Stress Test Script

## Goal

Create a stress test script that inserts 1 million items across 10 different tables and measures the resulting `.yjs` file size.

## Plan

- [ ] Create new example directory `examples/stress-test/`
- [ ] Create `package.json` with dependencies on `@epicenter/hq`, `arktype`, `wellcrafted`
- [ ] Create `epicenter.config.ts` with a workspace defining 10 simple tables
- [ ] Create `stress-test.ts` script that:
  - Uses `await using client = await createEpicenterClient(config)` pattern
  - Inserts 100,000 items into each of 10 tables (1 million total)
  - Uses batch inserts for performance
  - Measures and reports elapsed time
  - Reports final `.yjs` file size
- [ ] Test the script

## Tables Design

Keep tables simple to focus on the stress test. Each table will have:
- `id` (id type)
- `name` (text)
- `value` (integer)
- `created_at` (text for timestamp)

Tables:
1. `items_a`
2. `items_b`
3. `items_c`
4. `items_d`
5. `items_e`
6. `items_f`
7. `items_g`
8. `items_h`
9. `items_i`
10. `items_j`

## Expected Output

```
Starting YJS stress test...
Inserting 100,000 items into each of 10 tables (1,000,000 total)...

Table items_a: 100000 items inserted in X.XXs
Table items_b: 100000 items inserted in X.XXs
...
Table items_j: 100000 items inserted in X.XXs

Total time: XXXs
Waiting for persistence...
YJS file size: XX.XX MB
```

## Notes

- The `setupPersistence` provider automatically saves to `.epicenter/{workspace-id}.yjs`
- We only need the sqlite index for this test (no markdown index needed)
- Use `generateId()` for row IDs
- Insert in batches to avoid memory issues
